<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerador de Vídeos Automatizados</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* --- TEMA PRINCIPAL --- */
        :root {
            --dark-900: #0A0A0A;
            --dark-800: #1A1A1A;
            --dark-700: #252525;
            --dark-600: #333333;
            --gray-500: #666666;
            --gray-400: #999999;
            --gray-200: #CCCCCC;
            --gray-50: #F0F0F0;
            --accent-500: #6D28D9;
            --accent-600: #5B21B6;
            --accent-400: #8B5CF6;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--dark-900);
            color: var(--gray-200);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 2rem;
            background-image: 
                radial-gradient(circle at 25% 25%, rgba(109, 40, 217, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 75% 75%, rgba(109, 40, 217, 0.1) 0%, transparent 50%);
        }

        .container {
            width: 100%;
            max-width: 800px;
            animation: fadeIn 0.5s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* --- CABEÇALHO --- */
        .header {
            text-align: center;
            margin-bottom: 2.5rem;
        }

        .header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            background: linear-gradient(90deg, #FFFFFF, var(--accent-400));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            letter-spacing: -0.05em;
        }

        .header p {
            color: var(--gray-400);
            font-size: 1.1rem;
            max-width: 600px;
            margin: 0 auto;
        }

        /* --- FORMULÁRIO --- */
        .video-form {
            background-color: var(--dark-800);
            border-radius: 16px;
            padding: 2.5rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            border: 1px solid var(--dark-600);
            display: grid;
            gap: 1.75rem;
        }

        .form-section {
            display: grid;
            gap: 1.75rem;
        }

        .form-section-title {
            color: var(--gray-50);
            font-weight: 600;
            font-size: 1.1rem;
            margin-bottom: -0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .form-section-title::before {
            content: "";
            display: block;
            width: 8px;
            height: 8px;
            background-color: var(--accent-500);
            border-radius: 50%;
        }

        .form-field {
            display: grid;
            gap: 0.6rem;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
        }

        .form-row-3 {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 1.5rem;
        }

        label {
            font-weight: 500;
            color: var(--gray-400);
            font-size: 0.95rem;
            letter-spacing: 0.01em;
        }

        input, select, textarea {
            padding: 1rem 1.2rem;
            background-color: var(--dark-700);
            border: 1px solid var(--dark-600);
            border-radius: 10px;
            color: white;
            font-size: 0.95rem;
            transition: all 0.25s ease;
            width: 100%;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--accent-500);
            box-shadow: 0 0 0 3px rgba(109, 40, 217, 0.3);
        }

        textarea {
            min-height: 120px;
            resize: vertical;
            line-height: 1.5;
        }

        /* CHECKBOX PERSONALIZADO */
        .checkbox-group {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .checkbox-field {
            display: flex;
            align-items: center;
            gap: 0.7rem;
        }

        .checkbox-field input[type="checkbox"] {
            -webkit-appearance: none;
            appearance: none;
            width: 18px;
            height: 18px;
            border: 2px solid var(--dark-600);
            border-radius: 4px;
            background-color: var(--dark-700);
            cursor: pointer;
            position: relative;
            transition: all 0.2s;
            flex-shrink: 0;
        }

        .checkbox-field input[type="checkbox"]:checked {
            background-color: var(--accent-500);
            border-color: var(--accent-500);
        }

        .checkbox-field input[type="checkbox"]:checked::after {
            content: "✓";
            position: absolute;
            color: white;
            font-size: 12px;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .checkbox-field label {
            font-weight: 400;
            cursor: pointer;
            user-select: none;
        }

        /* BOTÕES */
        .btn {
            cursor: pointer;
            padding: 1rem 1.5rem;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            font-size: 1rem;
            transition: all 0.25s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .btn-primary {
            background-color: var(--accent-500);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--accent-600);
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(109, 40, 217, 0.3);
        }

        .btn-secondary {
            background-color: var(--dark-700);
            color: var(--gray-200);
        }

        .btn-secondary:hover {
            background-color: var(--dark-600);
        }

        .submit-btn {
            grid-column: 1 / -1;
            margin-top: 1rem;
            position: relative;
            overflow: hidden;
        }

        .submit-btn::after {
            content: "";
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(
                to bottom right,
                rgba(255, 255, 255, 0) 45%,
                rgba(255, 255, 255, 0.15) 50%,
                rgba(255, 255, 255, 0) 55%
            );
            transform: rotate(30deg);
            animation: shine 3s infinite;
        }

        @keyframes shine {
            0% { transform: translateX(-100%) rotate(30deg); }
            100% { transform: translateX(100%) rotate(30deg); }
        }

        /* DIVISÓRIAS */
        .divider {
            border: none;
            border-top: 1px solid var(--dark-600);
            margin: 1.5rem 0;
            position: relative;
        }

        .divider::after {
            content: "";
            position: absolute;
            top: -1px;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 1px;
            background-color: var(--accent-500);
        }

        /* GRUPO DE VOZ */
        .voice-preview {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .voice-preview select {
            flex: 1;
        }

        /* RESPONSIVIDADE */
        @media (max-width: 768px) {
            .form-row, .form-row-3 {
                grid-template-columns: 1fr;
            }
            
            body {
                padding: 1.5rem;
            }
            
            .video-form {
                padding: 1.5rem;
            }
            
            .header h1 {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>Gerador de Vídeos Automatizados</h1>
            <p>Crie vídeos profissionais em escala para seu canal com apenas alguns cliques</p>
        </header>

        <form class="video-form" method="post">
            {% csrf_token %}
            
            <!-- Seção: Configurações Básicas -->
            <div class="form-section">
                <h3 class="form-section-title">Configurações Básicas</h3>
                
                <div class="form-field">
                    <label for="{{ form.plano_de_fundo.id_for_label }}">{{ form.plano_de_fundo.label }}</label>
                    {{ form.plano_de_fundo }}
                </div>

                <div class="form-row">
                    <div class="form-field">
                        <label for="{{ form.categoria_video.id_for_label }}">{{ form.categoria_video.label }}</label>
                        {{ form.categoria_video }}
                    </div>
                    <div class="form-field">
                        <label for="{{ form.categoria_musica.id_for_label }}">{{ form.categoria_musica.label }}</label>
                        {{ form.categoria_musica }}
                    </div>
                </div>
            </div>

            <!-- Seção: Texto do Vídeo -->
            <div class="form-section">
                <h3 class="form-section-title">Texto do Vídeo</h3>
                
                <div class="form-field">
                    <label for="{{ form.texto_overlay.id_for_label }}">{{ form.texto_overlay.label }}</label>
                    {{ form.texto_overlay }}
                </div>

                <div class="form-row-3">
                    <div class="form-field">
                        <label for="{{ form.texto_fonte.id_for_label }}">{{ form.texto_fonte.label }}</label>
                        {{ form.texto_fonte }}
                    </div>
                    <div class="form-field">
                        <label for="{{ form.texto_tamanho.id_for_label }}">{{ form.texto_tamanho.label }}</label>
                        {{ form.texto_tamanho }}
                    </div>
                    <div class="form-field">
                        <label>Estilos de Texto</label>
                        <div class="checkbox-group">
                            <div class="checkbox-field">
                                {{ form.texto_negrito }}
                                <label for="{{ form.texto_negrito.id_for_label }}">{{ form.texto_negrito.label }}</label>
                            </div>
                            <div class="checkbox-field">
                                {{ form.texto_sublinhado }}
                                <label for="{{ form.texto_sublinhado.id_for_label }}">{{ form.texto_sublinhado.label }}</label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Divisor -->
            <div class="divider"></div>

            <!-- Seção: Narração -->
            <div class="form-section">
                <h3 class="form-section-title">Configurações de Narração</h3>
                
                <div class="form-field">
                    <label for="{{ form.narrador_texto.id_for_label }}">{{ form.narrador_texto.label }}</label>
                    {{ form.narrador_texto }}
                </div>

                <div class="form-field">
                    <label for="{{ form.narrador_voz.id_for_label }}">{{ form.narrador_voz.label }}</label>
                    <div class="voice-preview">
                        {{ form.narrador_voz }}
                        <button type="button" class="btn btn-secondary" id="play-voice-preview">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-right: 4px;">
                                <path d="M5 5V19L19 12L5 5Z" fill="currentColor"/>
                            </svg>
                            Ouvir Exemplo
                        </button>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-field">
                        <label for="{{ form.narrador_velocidade.id_for_label }}">{{ form.narrador_velocidade.label }}</label>
                        {{ form.narrador_velocidade }}
                        <small>{{ form.narrador_velocidade.help_text }}</small>
                    </div>
                    <div class="form-field">
                        <label for="{{ form.narrador_tom.id_for_label }}">{{ form.narrador_tom.label }}</label>
                        {{ form.narrador_tom }}
                    </div>
                </div>
            </div>

            <!-- Divisor -->
            <div class="divider"></div>

            <!-- Seção: Configurações Avançadas -->
            <div class="form-section">
                <h3 class="form-section-title">Configurações Avançadas</h3>
                
                <div class="form-row">
                    <div class="form-field">
                        <label for="{{ form.duracao_segundos.id_for_label }}">{{ form.duracao_segundos.label }}</label>
                        {{ form.duracao_segundos }}
                    </div>
                    <div class="form-field">
                        <label for="{{ form.volume_musica.id_for_label }}">{{ form.volume_musica.label }}</label>
                        {{ form.volume_musica }}
                    </div>
                </div>

                <div class="checkbox-field" style="margin-top: 0.5rem;">
                    {{ form.loop_video }}
                    <label for="{{ form.loop_video.id_for_label }}">{{ form.loop_video.label }}</label>
                </div>
            </div>

            <button type="submit" class="btn btn-primary submit-btn">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-right: 8px;">
                    <path d="M5 5V19L19 12L5 5Z" fill="currentColor"/>
                </svg>
                Gerar Vídeo Agora
            </button>
        </form>
    </div>

    <audio id="voice-audio-player" style="display: none;"></audio>

    <script>
        document.getElementById('play-voice-preview').addEventListener('click', function() {
            const voiceSelect = document.getElementById('id_narrador_voz');
            const selectedVoice = voiceSelect.value;
            const button = this;
            
            if (selectedVoice) {
                const audioPlayer = document.getElementById('voice-audio-player');
                const previewUrl = `/preview-voz/${selectedVoice}/`;
                
                // Altera o ícone para um ícone de loading
                button.innerHTML = `
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="animate-spin" style="margin-right: 4px;">
                        <path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22ZM12 19C8.13401 19 5 15.866 5 12C5 8.13401 8.13401 5 12 5C15.866 5 19 8.13401 19 12C19 15.866 15.866 19 12 19Z" fill="currentColor" opacity="0.3"/>
                        <path d="M12 2C6.47715 2 2 6.47715 2 12C2 13.8214 2.48697 15.5291 3.33782 17L4.26777 15.7322C3.61305 14.5894 3.2 13.3188 3.2 12C3.2 7.13989 7.13989 3.2 12 3.2C16.8601 3.2 20.8 7.13989 20.8 12C20.8 13.3188 20.387 14.5894 19.7322 15.7322L20.6622 17C21.513 15.5291 22 13.8214 22 12C22 6.47715 17.5228 2 12 2Z" fill="currentColor"/>
                    </svg>
                    Carregando...
                `;
                button.disabled = true;

                audioPlayer.src = previewUrl;
                audioPlayer.play().catch(e => {
                    console.error("Erro ao tocar o áudio:", e);
                    // Restaura o botão em caso de erro
                    button.innerHTML = `
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-right: 4px;">
                            <path d="M5 5V19L19 12L5 5Z" fill="currentColor"/>
                        </svg>
                        Ouvir Exemplo
                    `;
                    button.disabled = false;
                });

                audioPlayer.onended = function() {
                    button.innerHTML = `
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-right: 4px;">
                            <path d="M5 5V19L19 12L5 5Z" fill="currentColor"/>
                        </svg>
                        Ouvir Exemplo
                    `;
                    button.disabled = false;
                };
            }
        });

        // Adiciona animação de spin
        const style = document.createElement('style');
        style.textContent = `
            @keyframes spin {
                from { transform: rotate(0deg); }
                to { transform: rotate(360deg); }
            }
            .animate-spin {
                animation: spin 1s linear infinite;
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>